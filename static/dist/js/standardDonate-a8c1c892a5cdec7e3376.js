!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/static/screen/js/",t(t.s=370)}({1:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function o(){_&&d&&(_=!1,d.length?p=d.concat(p):g=-1,p.length&&a())}function a(){if(!_){var e=i(o);_=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,_=!1,s(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,h,l=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var d,p=[],_=!1,g=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||_||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},15:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},16:function(e,t,n){"use strict";function r(){return(0,i.request)("/api/users/user")}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserData=r;var i=n(8)},17:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,s){var c=new o.default({url:"http://"+u+":8000",user:""+e,timestamp:r,info:"",token:i,authHeaders:{"X-TOKEN-KEY":(0,a.getToken)()},authEndpoint:"/api/auth/centrifugo",debug:!0});return c.on("connect",function(e){return console.log("connect",e)}),c.on("error",function(e){console.log(e)}),c.on("disconnect",function(e){return console.log("disconnect",e)}),c.subscribe("$"+e+"/"+t,s).on("join",function(e){return console.log("join")}).on("leave",function(e){return console.log("leave")}),c.connect(),c}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=n(25),o=r(s),a=n(8),u=document.domain||"localhost"},210:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){(0,a.request)("/api/widgets/standard/donates/"+t.id+"?text="+n).then(function(){var n=new Audio("/uploads/voice/"+t.id+".mp3"),r=t;n.load(),r.voicer=!0,r.audioFile=n,e.addDonate(r)})}function s(e,t){return function(n){var r=n.data;switch(r.type){case"add_standard_donate":t.needVoice(r.donate.money)?i(e,r.donate,t.renderForAudio(r.donate)):e.addDonate(r.donate);break;case"save_standard_donate":e.filterDonates(r.donate.id);break;case"standard_prefs_save":r.standard.active&&t.newPref(r.standard);break;default:console.log("no switcher",r)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.Pref=t.Queue=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getSwitcher=s;var a=n(8),u=n(269);t.Queue=function(){function e(){r(this,e),this.q=[]}return o(e,[{key:"addDonate",value:function(e){this.q.push(e)}},{key:"addDonateVoice",value:function(e){}},{key:"getNext",value:function(){return this.q.shift()}},{key:"filterDonates",value:function(e){this.q=this.q.filter(function(t){return t.id!==e})}},{key:"next",value:function(){return this.q.length>0}},{key:"showed",value:function(e){(0,a.request)("/api/widgets/standard/donates/"+e,{method:"POST"}),this.filterDonates(e)}}]),e}(),t.Pref=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{view_template:"{{=it.user}} - {{=it.amount}} - {{=it.message}}"};r(this,e),this.newPref(t)}return o(e,[{key:"newTmp",value:function(){""===this.pref.view_template&&(this.pref.view_template="{user} прислал {amount} рублей и сообщает: {message}");var e=this.pref.view_template.replace("{user}","{{=it.user}}").replace("{amount}","{{=it.amount}}").replace("{message}","{{=it.message}}");this.tempFn=u.template(e)}},{key:"newPref",value:function(e){this.pref=e,this.newTmp(),this.setAudio(),this.setPic()}},{key:"render",value:function(e){var t=this.getPic();return t+='<div class="message">'+this.tempFn({user:e.nickname,amount:e.money,message:e.message})+"</div>"}},{key:"renderForAudio",value:function(e){return this.tempFn({user:e.nickname,amount:e.money,message:e.message})}},{key:"getViewTime",value:function(){return Math.max(1e3*this.audioFile.duration,1e3*this.pref.view_time)}},{key:"getVolume",value:function(){return this.pref.sound_volume/100}},{key:"setAudio",value:function(){this.pref.sound&&(this.audioFile=new Audio("/uploads/"+this.pref.user_id+"/sound/"+this.pref.sound),this.audioFile.volume=this.getVolume(),this.audioFile.load())}},{key:"audioPlay",value:function(){return this.audioFile?this.audioFile.play():Promise(function(e){return e()})}},{key:"setPic",value:function(){if(this.pref.pic){var e=new Image;e.src="/uploads/"+this.pref.user_id+"/pic/"+this.pref.pic,this.pic="/uploads/"+this.pref.user_id+"/pic/"+this.pref.pic}}},{key:"getPic",value:function(){return this.pic?'<div class="pic"><img src="'+this.pic+'"></img></div>':""}},{key:"needVoice",value:function(e){return this.pref.voice_cost<=e&&this.pref.sound_volume>5}},{key:"durationSound",value:function(){return 1e3+1e3*this.audioFile.duration}},{key:"muted",value:function(){return this.pref.sound_volume<10}}]),e}()},211:function(e,t,n){"use strict";function r(e){return function(t){for(var n=0;n<t.length;n++)t[n].active&&e.newPref(t[n])}}function i(e){return(0,s.request)("/api/widgets/standard/").then(function(e){return e.json()}).then(r(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.loadPref=i;var s=n(8)},212:function(e,t,n){"use strict";function r(e){s.innerHTML=e}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){if(n&&e.showed(n),r(""),e.next()){var s=e.getNext(),o=(t.getPic(),Math.max(t.getViewTime()));s.voicer&&!t.muted()&&(s.audioFile.volume=t.getVolume(),setTimeout(function(){return s.audioFile.play()},t.durationSound()),o=1e3+Math.max(1e3*s.audioFile.duration+t.durationSound(),t.getViewTime())),r(t.render(s)),t.audioPlay(),setTimeout(i(e,t,s.id),o)}else setTimeout(i(e,t),1e3)}}Object.defineProperty(t,"__esModule",{value:!0}),t.showDataOnPage=i;var s=(n(8),document.getElementById("show"))},215:function(e,t,n){var r=n(267);"string"==typeof r&&(r=[[e.i,r,""]]);n(33)(r,{});r.locals&&(e.exports=r.locals)},25:function(e,t,n){(function(t){function r(e,t){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,t.prototype}function i(e,t){try{return e[t]}catch(e){return}}function s(e,t,n){for(var r=t||{},o=2;o<arguments.length;++o){var a=arguments[o];if(void 0!==a&&null!==a)for(var u in a){var c=i(a,u),f=i(r,u);if(c!==t&&void 0!==c)if(e&&"object"==typeof c&&null!==c)if(c instanceof Array)r[u]=s(e,f instanceof Array?f:[],c);else{var h="object"!=typeof f||f instanceof Array?{}:f;r[u]=s(e,h,c)}else r[u]=c}}return r}function o(e,t){return e.indexOf(t,e.length-t.length)!==-1}function a(e,t){return 0===e.lastIndexOf(t,0)}function u(e){return"/"==e.substring(e.length-1)&&(e=e.substring(0,e.length-1)),e}function c(e){return void 0!==e&&null!==e&&("string"==typeof e||e instanceof String)}function f(e){return void 0!==e&&null!==e&&"function"==typeof e}function h(e,n){if(t.console){var r=t.console[e];f(r)&&r.apply(t.console,n)}}function l(e,t,n){var r=.5*Math.random(),i=t*Math.pow(2,e+1);return i>n&&(i=n),Math.floor((1-r)*i)}function d(e){return"error"in e&&null!==e.error&&""!==e.error}function p(e){this._useSockJS=!1,this._status="disconnected",this._reconnect=!0,this._reconnecting=!1,this._transport=null,this._transportName=null,this._transportClosed=!0,this._messageId=0,this._clientID=null,this._subs={},this._lastMessageID={},this._messages=[],this._isBatching=!1,this._isAuthBatching=!1,this._authChannels={},this._numRefreshFailed=0,this._refreshTimeout=null,this._pingInterval=null,this._pongTimeout=null,this._retries=0,this._callbacks={},this._latency=null,this._latencyStart=null,this._config={sockJS:null,retry:1e3,maxRetry:2e4,timeout:5e3,info:"",resubscribe:!0,ping:!0,pingInterval:3e4,pongWaitTimeout:5e3,debug:!1,insecure:!1,server:null,privateChannelPrefix:"$",transports:["websocket","xdr-streaming","xhr-streaming","eventsource","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],refreshEndpoint:"/centrifuge/refresh/",refreshHeaders:{},refreshParams:{},refreshData:{},refreshTransport:"ajax",refreshAttempts:null,refreshFailed:null,authEndpoint:"/centrifuge/auth/",authHeaders:{},authParams:{},authTransport:"ajax"},e&&this.configure(e)}function _(e,t,n){this._status=m,this._error=null,this._centrifuge=e,this.channel=t,this._setEvents(n),this._isResubscribe=!1,this._ready=!1,this._promise=null,this._initializePromise()}var g=n(27).Promise,b=n(35);Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t,n,r=Object(this),i=r.length>>>0;if(0===i)return-1;if(t=0,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&1/0!=t&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=i)return-1;for(n=t>=0?t:Math.max(i-Math.abs(t),0);i>n;n++)if(n in r&&r[n]===e)return n;return-1}),r(p,b),p._authCallbacks={},p._nextAuthCallbackID=1;var v=p.prototype;v._jsonp=function(e,n,r,i,s){r.length>0&&this._log("Only AJAX request allows to send custom headers, it's not possible with JSONP."),self._debug("sending JSONP request to",e);var o=p._nextAuthCallbackID.toString();p._nextAuthCallbackID++;var a=t.document,u=a.createElement("script");p._authCallbacks[o]=function(e){s(!1,e),delete p[o]};var c="";for(var f in n)c.length>0&&(c+="&"),c+=encodeURIComponent(f)+"="+encodeURIComponent(n[f]);var h="Centrifuge._authCallbacks['"+o+"']";u.src=this._config.authEndpoint+"?callback="+encodeURIComponent(h)+"&data="+encodeURIComponent(JSON.stringify(i))+"&"+c;var l=a.getElementsByTagName("head")[0]||a.documentElement;l.insertBefore(u,l.firstChild)},v._ajax=function(e,n,r,i,s){var o=this;o._debug("sending AJAX request to",e);var a=t.XMLHttpRequest?new t.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),u="";for(var c in n)u.length>0&&(u+="&"),u+=encodeURIComponent(c)+"="+encodeURIComponent(n[c]);u.length>0&&(u="?"+u),a.open("POST",e+u,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","application/json");for(var f in r)a.setRequestHeader(f,r[f]);return a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e,t=!1;try{e=JSON.parse(a.responseText),t=!0}catch(e){s(!0,"JSON returned was invalid, yet status code was 200. Data was: "+a.responseText)}t&&s(!1,e)}else o._log("Couldn't get auth info from application",a.status),s(!0,a.status)},setTimeout(function(){a.send(JSON.stringify(i))},20),a},v._log=function(){h("info",arguments)},v._debug=function(){this._config.debug===!0&&h("debug",arguments)},v._configure=function(e){if(this._debug("Configuring centrifuge object with",e),e||(e={}),this._config=s(!1,this._config,e),!this._config.url)throw"Missing required configuration parameter 'url' specifying server URL";if(!this._config.user&&""!==this._config.user){if(!this._config.insecure)throw"Missing required configuration parameter 'user' specifying user's unique ID in your application";this._debug("user not found but this is OK for insecure mode - anonymous access will be used"),this._config.user=""}if(!this._config.timestamp){if(!this._config.insecure)throw"Missing required configuration parameter 'timestamp'";this._debug("token not found but this is OK for insecure mode")}if(!this._config.token){if(!this._config.insecure)throw"Missing required configuration parameter 'token' specifying the sign of authorization request";this._debug("timestamp not found but this is OK for insecure mode")}if(this._config.url=u(this._config.url),o(this._config.url,"connection"))if(this._debug("client will connect to SockJS endpoint"),null!==this._config.sockJS)this._debug("SockJS explicitly provided in options"),this._useSockJS=!0;else{if("undefined"==typeof SockJS)throw"include SockJS client library before Centrifuge javascript client library or use raw Websocket connection endpoint";this._debug("use globally defined SockJS"),this._config.sockJS=SockJS,this._useSockJS=!0}else o(this._config.url,"connection/websocket")?(this._debug("client will connect to raw Websocket endpoint"),this._config.url=this._config.url.replace("http://","ws://"),this._config.url=this._config.url.replace("https://","wss://")):(this._debug("client will detect connection endpoint itself"),null===this._config.sockJS&&"undefined"==typeof SockJS?(this._debug("no SockJS found, client will connect to raw Websocket endpoint"),this._config.url+="/connection/websocket",this._config.url=this._config.url.replace("http://","ws://"),this._config.url=this._config.url.replace("https://","wss://")):(this._debug("SockJS found, client will connect to SockJS endpoint"),null!==this._config.sockJS?this._debug("SockJS explicitly provided in options"):(this._debug("use globally defined SockJS"),this._config.sockJS=SockJS),this._config.url+="/connection",this._useSockJS=!0))},v._setStatus=function(e){this._status!==e&&(this._debug("Status",this._status,"->",e),this._status=e)},v._isDisconnected=function(){return"disconnected"===this._status},v._isConnecting=function(){return"connecting"===this._status},v._isConnected=function(){return"connected"===this._status},v._nextMessageId=function(){return++this._messageId},v._resetRetry=function(){this._debug("reset retries count to 0"),this._retries=0},v._getRetryInterval=function(){var e=l(this._retries,this._config.retry,this._config.maxRetry);return this._retries+=1,e},v._clearConnectedState=function(e){this._clientID=null;for(var t in this._callbacks){var n=this._callbacks[t],r=n.errback;r&&r(this._createErrorObject("disconnected","retry"))}this._callbacks={};for(var i in this._subs){var s=this._subs[i];e?(s._isSuccess()&&s._triggerUnsubscribe(),s._setSubscribing()):s._setUnsubscribed()}this._config.resubscribe&&this._reconnect||(this._subs={})},v._send=function(e){0!==e.length&&(1==e.length&&(e=e[0]),this._debug("Send",e),this._transport.send(JSON.stringify(e)))},v._setupTransport=function(){if(this._useSockJS===!0){var e={transports:this._config.transports};null!==this._config.server&&(e.server=this._config.server),this._transport=new this._config.sockJS(this._config.url,null,e)}else this._transport=new WebSocket(this._config.url);var t=this;this._transport.onopen=function(){t._transportClosed=!1,t._reconnecting=!1,t._useSockJS?(t._transportName=t._transport.transport,t._transport.onheartbeat=function(){t._restartPing()}):t._transportName="raw-websocket",t._resetRetry(),c(t._config.user)||t._log("user expected to be string"),c(t._config.info)||t._log("info expected to be string");var e={method:"connect",params:{user:t._config.user,info:t._config.info}};t._config.insecure||(e.params.timestamp=t._config.timestamp,e.params.token=t._config.token,c(t._config.timestamp)||t._log("timestamp expected to be string"),c(t._config.token)||t._log("token expected to be string")),t._addMessage(e),t._latencyStart=new Date},this._transport.onerror=function(e){t._debug("transport level error",e)},this._transport.onclose=function(e){t._transportClosed=!0;var n="connection closed",r=!0;if(e&&"reason"in e&&e.reason)try{var i=JSON.parse(e.reason);t._debug("reason is an advice object",i),n=i.reason,r=i.reconnect}catch(i){n=e.reason,t._debug("reason is a plain string",n),r="disconnect"!==n}if(t._disconnect(n,r),t._reconnect===!0){t._reconnecting=!0;var s=t._getRetryInterval();t._debug("reconnect after "+s+" milliseconds"),setTimeout(function(){t._reconnect===!0&&t._connect.call(t)},s)}},this._transport.onmessage=function(e){var n;n=JSON.parse(e.data),t._debug("Received",n),t._receive(n),t._restartPing()}},v._connect=function(e){if(this.isConnected())return void this._debug("connect called when already connected");if("connecting"!=this._status){if(this._numRefreshFailed>0)return void this._debug("can't connect when credentials expired, need to refresh");this._debug("start connecting"),this._setStatus("connecting"),this._clientID=null,this._reconnect=!0,e&&this.on("connect",e),this._setupTransport()}},v._disconnect=function(e,t){if(!this.isDisconnected()){this._debug("disconnected:",e,t);var n=t||!1;if(n===!1&&(this._reconnect=!1),this._clearConnectedState(t),!this.isDisconnected()){this._setStatus("disconnected");var r={reason:e,reconnect:n};this._refreshTimeout&&clearTimeout(this._refreshTimeout),this._reconnecting===!1&&this.trigger("disconnect",[r])}this._transportClosed||this._transport.close()}},v._refreshFailed=function(){this.isDisconnected()||this._disconnect("refresh failed",!1),null!==this._config.refreshFailed&&this._config.refreshFailed()},v._refresh=function(){var e=this;if(this._debug("refresh credentials"),0===e._config.refreshAttempts)return this._debug("refresh attempts set to 0, do not send refresh request at all"),void e._refreshFailed();var t=function(t,n){if(t===!0)return e._debug("error getting connect parameters",n),e._numRefreshFailed++,e._refreshTimeout&&clearTimeout(e._refreshTimeout),null!==e._config.refreshAttempts&&e._numRefreshFailed>=e._config.refreshAttempts?void e._refreshFailed():void(e._refreshTimeout=setTimeout(function(){e._refresh.call(e)},3e3+Math.round(1e3*Math.random())));if(e._numRefreshFailed=0,e._config.user=n.user,e._config.timestamp=n.timestamp,"info"in n&&(e._config.info=n.info),e._config.token=n.token,e.isDisconnected())e._debug("credentials refreshed, connect from scratch"),e._connect();else{e._debug("send refreshed credentials");var r={method:"refresh",params:{user:e._config.user,timestamp:e._config.timestamp,info:e._config.info,token:e._config.token}};e._addMessage(r)}},n=this._config.refreshTransport.toLowerCase();if("ajax"===n)this._ajax(this._config.refreshEndpoint,this._config.refreshParams,this._config.refreshHeaders,this._config.refreshData,t);else{if("jsonp"!==n)throw"Unknown refresh transport "+n;this._jsonp(this._config.refreshEndpoint,this._config.refreshParams,this._config.refreshHeaders,this._config.refreshData,t)}},v._subscribe=function(e){var t=e.channel;if(t in this._subs||(this._subs[t]=e),!this.isConnected())return void e._setNew();e._setSubscribing();var n={method:"subscribe",params:{channel:t}};if(a(t,this._config.privateChannelPrefix))this._isAuthBatching?this._authChannels[t]=!0:(this.startAuthBatching(),this._subscribe(e),this.stopAuthBatching());else{var r=this._recover(t);r===!0&&(n.params.recover=!0,n.params.last=this._getLastID(t)),this._addMessage(n)}},v._unsubscribe=function(e){if(this.isConnected()){var t={method:"unsubscribe",params:{channel:e.channel}};this._addMessage(t)}},v._getSub=function(e){var t=this._subs[e];return t?t:null},v._connectResponse=function(e){if(!this.isConnected())if(d(e))this.trigger("error",[{message:e}]);else{if(null!==this._latencyStart&&(this._latency=(new Date).getTime()-this._latencyStart.getTime(),this._latencyStart=null),!e.body)return;if(e.body.expires){var t=e.body.expired;if(t)return void this._refresh()}this._clientID=e.body.client,this._setStatus("connected"),this._refreshTimeout&&clearTimeout(this._refreshTimeout);var n=this;if(e.body.expires&&(this._refreshTimeout=setTimeout(function(){n._refresh.call(n)},1e3*e.body.ttl)),this._config.resubscribe){this.startBatching(),this.startAuthBatching();for(var r in this._subs){var i=this._subs[r];this._subscribe(i)}this.stopAuthBatching(),this.stopBatching(!0)}var s={client:e.body.client,transport:this._transportName,latency:this._latency};this._restartPing(),this.trigger("connect",[s])}},v._stopPing=function(){null!==this._pongTimeout&&clearTimeout(this._pongTimeout),null!==this._pingInterval&&clearInterval(this._pingInterval)},v._startPing=function(){if(!(this._config.ping!==!0||this._config.pingInterval<=0)&&this.isConnected()){var e=this;this._pingInterval=setInterval(function(){return e.isConnected()?(e.ping(),void(e._pongTimeout=setTimeout(function(){e._disconnect("no ping",!0)},e._config.pongWaitTimeout))):void e._stopPing()},this._config.pingInterval)}},v._restartPing=function(){this._stopPing(),this._startPing()},v._disconnectResponse=function(e){if(d(e))this.trigger("error",[{message:e}]);else{var t=!1;"reconnect"in e.body&&(t=e.body.reconnect);var n="";"reason"in e.body&&(n=e.body.reason),this._disconnect(n,t)}},v._subscribeResponse=function(e){var t=e.body;if(null!==t){var n=t.channel,r=this._getSub(n);if(r&&r._isSubscribing())if(d(e))this.trigger("error",[{message:e}]),r._setSubscribeError(this._errorObjectFromMessage(e));else{r._setSubscribeSuccess();var i=t.messages;if(i&&i.length>0)for(var s in i.reverse())this._messageResponse({body:i[s]});else"last"in t&&(this._lastMessageID[n]=t.last)}}},v._unsubscribeResponse=function(e){var t=e.uid,n=e.body,r=n.channel,i=this._getSub(r);i&&(d(e)?this.trigger("error",[{message:e}]):t||i._setUnsubscribed())},v._publishResponse=function(e){var t=e.uid,n=e.body;if(t in this._callbacks){var r=this._callbacks[t];if(delete this._callbacks[t],d(e)){var i=r.errback;if(!i)return;i(this._errorObjectFromMessage(e)),this.trigger("error",[{message:e}])}else{var s=r.callback;if(!s)return;s(n)}}},v._presenceResponse=function(e){var t=e.uid,n=e.body;if(t in this._callbacks){var r=this._callbacks[t];if(delete this._callbacks[t],d(e)){var i=r.errback;if(!i)return;i(this._errorObjectFromMessage(e)),this.trigger("error",[{message:e}])}else{var s=r.callback;if(!s)return;s(n)}}},v._historyResponse=function(e){var t=e.uid,n=e.body;if(t in this._callbacks){var r=this._callbacks[t];if(delete this._callbacks[t],d(e)){var i=r.errback;if(!i)return;i(this._errorObjectFromMessage(e)),this.trigger("error",[{message:e}])}else{var s=r.callback;if(!s)return;s(n)}}},v._joinResponse=function(e){var t=e.body,n=t.channel,r=this._getSub(n);r&&r.trigger("join",[t])},v._leaveResponse=function(e){var t=e.body,n=t.channel,r=this._getSub(n);r&&r.trigger("leave",[t])},v._messageResponse=function(e){var t=e.body,n=t.channel;this._lastMessageID[n]=t.uid;var r=this._getSub(n);r&&r.trigger("message",[t])},v._refreshResponse=function(e){if(this._refreshTimeout&&clearTimeout(this._refreshTimeout),d(e))this.trigger("error",[{message:e}]);else if(e.body.expires){var t=this,n=e.body.expired;if(n)return void(t._refreshTimeout=setTimeout(function(){t._refresh.call(t)},3e3+Math.round(1e3*Math.random())));this._clientID=e.body.client,t._refreshTimeout=setTimeout(function(){t._refresh.call(t)},1e3*e.body.ttl)}},v._dispatchMessage=function(e){if(void 0===e||null===e)return void this._debug("dispatch: got undefined or null message");var t=e.method;if(!t)return void this._debug("dispatch: got message with empty method");switch(t){case"connect":this._connectResponse(e);break;case"disconnect":this._disconnectResponse(e);break;case"subscribe":this._subscribeResponse(e);break;case"unsubscribe":this._unsubscribeResponse(e);break;case"publish":this._publishResponse(e);break;case"presence":this._presenceResponse(e);break;case"history":this._historyResponse(e);break;case"join":this._joinResponse(e);break;case"leave":this._leaveResponse(e);break;case"ping":break;case"refresh":this._refreshResponse(e);break;case"message":this._messageResponse(e);break;default:this._debug("dispatch: got message with unknown method"+t)}},v._receive=function(e){if(Object.prototype.toString.call(e)===Object.prototype.toString.call([])){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this._dispatchMessage(n)}}else Object.prototype.toString.call(e)===Object.prototype.toString.call({})&&this._dispatchMessage(e)},v._flush=function(){var e=this._messages.slice(0);this._messages=[],this._send(e)},v._ping=function(){var e={method:"ping"};this._addMessage(e)},v._recover=function(e){return e in this._lastMessageID},v._getLastID=function(e){var t=this._lastMessageID[e];return t?(this._debug("last uid found and sent for channel",e),t):(this._debug("no last uid found for channel",e),"")},v._createErrorObject=function(e,t){var n={error:e};return t&&(n.advice=t),n},v._errorObjectFromMessage=function(e){var t=e.error,n=e.advice;return this._createErrorObject(t,n)},v._registerCall=function(e,t,n){var r=this;this._callbacks[e]={callback:t,errback:n},setTimeout(function(){delete r._callbacks[e],f(n)&&n(r._createErrorObject("timeout","retry"))},this._config.timeout)},v._addMessage=function(e){var t=""+this._nextMessageId();return e.uid=t,this._isBatching===!0?this._messages.push(e):this._send([e]),t},v.getClientId=function(){return this._clientID},v.isConnected=v._isConnected,v.isDisconnected=v._isDisconnected,v.configure=function(e){this._configure.call(this,e)},v.connect=v._connect,v.disconnect=function(){this._disconnect("client",!1)},v.ping=v._ping,v.startBatching=function(){this._isBatching=!0},v.stopBatching=function(e){e=e||!1,this._isBatching=!1,e===!0&&this.flush()},v.flush=function(){this._flush()},v.startAuthBatching=function(){this._isAuthBatching=!0},v.stopAuthBatching=function(){this._isAuthBatching=!1;var e=this._authChannels;this._authChannels={};var t=[];for(var n in e){var r=this._getSub(n);r&&t.push(n)}if(0!=t.length){var i={client:this.getClientId(),channels:t},s=this,o=function(e,n){if(e!==!0){var r=!1;s._isBatching||(s.startBatching(),r=!0);for(var i in t){var o=t[i],a=n[o];if(a)if(a.status&&200!==a.status)s._subscribeResponse({error:a.status,body:{channel:o}});else{var u={method:"subscribe",params:{channel:o,client:s.getClientId(),info:a.info,sign:a.sign}},c=s._recover(o);c===!0&&(u.params.recover=!0,u.params.last=s._getLastID(o)),s._addMessage(u)}else s._subscribeResponse({error:"channel not found in authorization response",advice:"fix",body:{channel:o}})}r&&s.stopBatching(!0)}else{s._debug("authorization request failed");for(var i in t){var o=t[i];s._subscribeResponse({error:"authorization request failed",advice:"fix",body:{channel:o}})}}},a=this._config.authTransport.toLowerCase();if("ajax"===a)this._ajax(this._config.authEndpoint,this._config.authParams,this._config.authHeaders,i,o);else{if("jsonp"!==a)throw"Unknown auth transport "+a;this._jsonp(this._config.authEndpoint,this._config.authParams,this._config.authHeaders,i,o)}}},v.subscribe=function(e,t){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!c(e))throw"Illegal argument type: channel must be a string";if(!this._config.resubscribe&&!this.isConnected())throw"Can not only subscribe in connected state when resubscribe option is off";var n=this._getSub(e);if(null!==n)return n._setEvents(t),n._isUnsubscribed()&&n.subscribe(),n;var r=new _(this,e,t);return this._subs[e]=r,r.subscribe(),r};var m=0,y=1,w=2,S=3,x=4;r(_,b);var k=_.prototype;k._initializePromise=function(){this._ready=!1;var e=this;this._promise=new g(function(t,n){e._resolve=function(n){e._ready=!0,t(n)},e._reject=function(t){e._ready=!0,n(t)}})},k._setEvents=function(e){if(e)if(f(e))this.on("message",e);else if(Object.prototype.toString.call(e)===Object.prototype.toString.call({})){var t=["message","join","leave","unsubscribe","subscribe","error"];for(var n in t){var r=t[n];r in e&&this.on(r,e[r])}}},k._isNew=function(){return this._status===m},k._isUnsubscribed=function(){return this._status===x},k._isSubscribing=function(){return this._status===y},k._isReady=function(){return this._status===w||this._status===S},k._isSuccess=function(){return this._status===w},k._isError=function(){return this._status===S},k._setNew=function(){this._status=m},k._setSubscribing=function(){this._ready===!0&&(this._initializePromise(),this._isResubscribe=!0),this._status=y},k._setSubscribeSuccess=function(){if(this._status!=w){this._status=w;var e=this._getSubscribeSuccessContext();this.trigger("subscribe",[e]),this._resolve(e)}},k._setSubscribeError=function(e){if(this._status!=S){this._status=S,this._error=e;var t=this._getSubscribeErrorContext();this.trigger("error",[t]),this._reject(t)}},k._triggerUnsubscribe=function(){var e={channel:this.channel};this.trigger("unsubscribe",[e])},k._setUnsubscribed=function(){this._status!=x&&(this._status=x,this._triggerUnsubscribe())},k._getSubscribeSuccessContext=function(){return{channel:this.channel,isResubscribe:this._isResubscribe}},k._getSubscribeErrorContext=function(){var e=this._error;return e.channel=this.channel,e.isResubscribe=this._isResubscribe,e},k.ready=function(e,t){this._ready&&(this._isSuccess()?e(this._getSubscribeSuccessContext()):t(this._getSubscribeErrorContext()))},k.subscribe=function(){if(this._status!=w)return this._centrifuge._subscribe(this),this},k.unsubscribe=function(){this._setUnsubscribed(),this._centrifuge._unsubscribe(this)},k.publish=function(e){var t=this;return new g(function(n,r){return t._isUnsubscribed()?void r(t._centrifuge._createErrorObject("subscription unsubscribed","fix")):void t._promise.then(function(){if(!t._centrifuge.isConnected())return void r(t._centrifuge._createErrorObject("disconnected","retry"));var i={method:"publish",params:{channel:t.channel,data:e}},s=t._centrifuge._addMessage(i);t._centrifuge._registerCall(s,n,r)},function(e){r(e)})})},k.presence=function(){var e=this;return new g(function(t,n){return e._isUnsubscribed()?void n(e._centrifuge._createErrorObject("subscription unsubscribed","fix")):void e._promise.then(function(){if(!e._centrifuge.isConnected())return void n(e._centrifuge._createErrorObject("disconnected","retry"));var r={method:"presence",params:{channel:e.channel}},i=e._centrifuge._addMessage(r);e._centrifuge._registerCall(i,t,n)},function(e){n(e)})})},k.history=function(){var e=this;return new g(function(t,n){return e._isUnsubscribed()?void n(e._centrifuge._createErrorObject("subscription unsubscribed","fix")):void e._promise.then(function(){if(!e._centrifuge.isConnected())return void n(e._centrifuge._createErrorObject("disconnected","retry"));var r={method:"history",params:{channel:e.channel}},i=e._centrifuge._addMessage(r);e._centrifuge._registerCall(i,t,n)},function(e){n(e)})})},e.exports=p}).call(t,n(15))},26:function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var s=this[i][0];"number"==typeof s&&(r[s]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},267:function(e,t,n){t=e.exports=n(26)(),
t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Pangolin);",""]),t.push([e.i,"body {\n  background: transparent; }\n\nimg {\n  display: block;\n  max-height: 300px;\n  margin: 0 auto; }\n\n.message1 {\n  font-family: 'Pangolin', cursive;\n  text-align: center;\n  font-size: 5em; }\n\n.message {\n  color: #bfae49;\n  font-family: 'Pangolin', cursive;\n  text-align: center;\n  font-size: 4em;\n  text-shadow: 0 1px 0 #b5a545, 0 2px 0 #ac9d42, 0 3px 0 #a2943e, 0 4px 0 #998b3a, 0 5px 0 #867a33, 0 6px 1px rgba(0, 0, 0, 0.1), 0 0 5px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.3), 0 3px 5px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.2), 0 20px 20px rgba(0, 0, 0, 0.15); }\n",""])},269:function(e,t,n){var r;!function(){"use strict";function i(e,t,n){return("string"==typeof t?t:t.toString()).replace(e.define||c,function(t,r,i,s){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in n||(":"===i?(e.defineParams&&s.replace(e.defineParams,function(e,t,i){n[r]={arg:t,text:i}}),r in n||(n[r]=s)):new Function("def","def['"+r+"']="+s)(n)),""}).replace(e.use||c,function(t,r){e.useParams&&(r=r.replace(e.useParams,function(e,t,r,i){if(n[r]&&n[r].arg&&i){var s=(r+":"+i).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[s]=n[r].text.replace(new RegExp("(^|[^\\w$])"+n[r].arg+"([^\\w$])","g"),"$1"+i+"$2"),t+"def.__exp['"+s+"']"}}));var s=new Function("def","return "+r)(n);return s?i(e,s,n):s})}function s(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var o,a={version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};a.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}},o=function(){return this||(0,eval)("this")}(),"undefined"!=typeof e&&e.exports?e.exports=a:(r=function(){return a}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)));var u={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},c=/$^/;a.template=function(e,t,n){t=t||a.templateSettings;var r,f,h=t.append?u.append:u.split,l=0,d=t.use||t.define?i(t,e,n||{}):e;d=("var out='"+(t.strip?d.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):d).replace(/'|\\/g,"\\$&").replace(t.interpolate||c,function(e,t){return h.start+s(t)+h.end}).replace(t.encode||c,function(e,t){return r=!0,h.startencode+s(t)+h.end}).replace(t.conditional||c,function(e,t,n){return t?n?"';}else if("+s(n)+"){out+='":"';}else{out+='":n?"';if("+s(n)+"){out+='":"';}out+='"}).replace(t.iterate||c,function(e,t,n,r){return t?(l+=1,f=r||"i"+l,t=s(t),"';var arr"+l+"="+t+";if(arr"+l+"){var "+n+","+f+"=-1,l"+l+"=arr"+l+".length-1;while("+f+"<l"+l+"){"+n+"=arr"+l+"["+f+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||c,function(e,t){return"';"+s(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),r&&(t.selfcontained||!o||o._encodeHTML||(o._encodeHTML=a.encodeHTMLSource(t.doNotSkipEncoded)),d="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+a.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+d);try{return new Function(t.varname,d)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+d),e}},a.compile=function(e,t){return a.template(e,null,t)}}()},27:function(e,t,n){(function(t,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.0.5
 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function s(e){W=e}function o(e){G=e}function a(){return function(){return t.nextTick(l)}}function u(){return"undefined"!=typeof K?function(){K(l)}:h()}function c(){var e=0,t=new Z(l),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function f(){var e=new MessageChannel;return e.port1.onmessage=l,function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(l,1)}}function l(){for(var e=0;e<z;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}z=0}function d(){try{var e=n(36);return K=e.runOnLoop||e.runOnContext,u()}catch(e){return h()}}function p(e,t){var n=arguments,r=this,i=new this.constructor(g);void 0===i[ie]&&B(i);var s=r._state;return s?!function(){var e=n[s-1];G(function(){return C(s,i,e,r._result)})}():j(r,i,e,t),i}function _(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return k(n,e),n}function g(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ue.error=e,ue}}function y(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function w(e,t,n){G(function(e){var r=!1,i=y(n,t,function(n){r||(r=!0,t!==n?k(e,n):E(e,n))},function(t){r||(r=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,O(e,i))},e)}function S(e,t){t._state===oe?E(e,t._result):t._state===ae?O(e,t._result):j(t,void 0,function(t){return k(e,t)},function(t){return O(e,t)})}function x(e,t,n){t.constructor===e.constructor&&n===p&&t.constructor.resolve===_?S(e,t):n===ue?O(e,ue.error):void 0===n?E(e,t):i(n)?w(e,t,n):E(e,t)}function k(t,n){t===n?O(t,b()):e(n)?x(t,n,m(n)):E(t,n)}function T(e){e._onerror&&e._onerror(e._result),P(e)}function E(e,t){e._state===se&&(e._result=t,e._state=oe,0!==e._subscribers.length&&G(P,e))}function O(e,t){e._state===se&&(e._state=ae,e._result=t,G(T,e))}function j(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+oe]=n,i[s+ae]=r,0===s&&e._state&&G(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,s=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?C(n,r,i,s):i(s);e._subscribers.length=0}}function A(){this.error=null}function R(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function C(e,t,n,r){var s=i(n),o=void 0,a=void 0,u=void 0,c=void 0;if(s){if(o=R(n,r),o===ce?(c=!0,a=o.error,o=null):u=!0,t===o)return void O(t,v())}else o=r,u=!0;t._state!==se||(s&&u?k(t,o):c?O(t,a):e===oe?E(t,o):e===ae&&O(t,o))}function M(e,t){try{t(function(t){k(e,t)},function(t){O(e,t)})}catch(t){O(e,t)}}function L(){return fe++}function B(e){e[ie]=fe++,e._state=void 0,e._result=void 0,e._subscribers=[]}function I(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[ie]||B(this.promise),X(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):O(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function D(e){return new I(this,e).promise}function F(e){var t=this;return new t(X(e)?function(n,r){for(var i=e.length,s=0;s<i;s++)t.resolve(e[s]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function J(e){var t=this,n=new t(g);return O(n,e),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[ie]=L(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&q(),this instanceof H?M(this,e):N())}function $(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=H}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var X=V,z=0,K=void 0,W=void 0,G=function(e,t){ne[z]=e,ne[z+1]=t,z+=2,2===z&&(W?W(l):re())},Y="undefined"!=typeof window?window:void 0,Q=Y||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?a():Z?c():te?f():void 0===Y?d():h();var ie=Math.random().toString(36).substring(16),se=void 0,oe=1,ae=2,ue=new A,ce=new A,fe=0;return I.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===se&&n<e;n++)this._eachEntry(t[n],n)},I.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===_){var i=m(e);if(i===p&&e._state!==se)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===H){var s=new n(g);x(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},I.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===se&&(this._remaining--,e===ae?O(r,n):this._result[t]=n),0===this._remaining&&E(r,this._result)},I.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){return n._settledAt(oe,t,e)},function(e){return n._settledAt(ae,t,e)})},H.all=D,H.race=F,H.resolve=_,H.reject=J,H._setScheduler=s,H._setAsap=o,H._asap=G,H.prototype={constructor:H,then:p,catch:function(e){return this.then(null,e)}},H.polyfill=$,H.Promise=H,H})}).call(t,n(1),n(15))},33:function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=l[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(u(r.parts[s],t))}else{for(var o=[],s=0;s<r.parts.length;s++)o.push(u(r.parts[s],t));l[r.id]={id:r.id,refs:1,parts:o}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],s=i[0],o=i[1],a=i[2],u=i[3],c={css:o,media:a,sourceMap:u};n[s]?n[s].parts.push(c):t.push(n[s]={id:s,parts:[c]})}return t}function i(e,t){var n=_(),r=v[v.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),v.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function o(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function a(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=b++;n=g||(g=o(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(t),r=h.bind(null,n),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(t),r=f.bind(null,n),i=function(){s(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var s=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}var l={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),_=d(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,v=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var s=[],o=0;o<i.length;o++){var a=i[o],u=l[a.id];u.refs--,s.push(u)}if(e){var c=r(e);n(c,t)}for(var o=0;o<s.length;o++){var u=s[o];if(0===u.refs){for(var f=0;f<u.parts.length;f++)u.parts[f]();delete l[u.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},34:function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=o(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=o(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&m(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!y(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function _(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},y=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},b.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];g.redirect=function(e,t){if(S.indexOf(t)===-1)throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new d(e,t),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:_(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;n(new g(t,e))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&b.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},35:function(e,t,n){var r;(function(){"use strict";function t(){}function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}var o=t.prototype,a=this,u=a.EventEmitter;o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,t){var n,r=this.getListenersAsObject(e),s="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&i(r[n],t)===-1&&r[n].push(s?t:{listener:t,once:!1});return this},o.on=s("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=s("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,r,s=this.getListenersAsObject(e);for(r in s)s.hasOwnProperty(r)&&(n=i(s[r],t),n!==-1&&s[r].splice(n,1));return this},o.off=s("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=s("removeEvent"),o.emitEvent=function(e,t){var n,r,i,s,o,a=this.getListenersAsObject(e);for(s in a)if(a.hasOwnProperty(s))for(n=a[s].slice(0),i=n.length;i--;)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=s("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return a.EventEmitter=u,t},r=function(){return t}.call(a,n,a,e),!(void 0!==r&&(e.exports=r))}).call(this)},36:function(e,t){},370:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),s=(n(8),n(17)),o=r(s),a=n(210),u=n(212),c=n(211);n(215);var f="standard",h=new a.Queue,l=new a.Pref;(0,c.loadPref)(l);var d=(0,a.getSwitcher)(h,l),p=(0,i.getUserData)().then(function(e){return e.json()});p.then(function(e){return(0,o.default)(e.user.id,f,e.user.username,e.centrifugo.timestamp,e.centrifugo.token,d)}),(0,u.showDataOnPage)(h,l)()},8:function(e,t,n){"use strict";function r(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function i(){return r("t")}function s(e){return void 0==e.headers&&(e.headers={}),e.headers["X-TOKEN-KEY"]=i(),e}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,s(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.getParameterByName=r,t.getToken=i,t.request=o,n(34)}});